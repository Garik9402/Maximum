/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
var __webpack_exports__ = {};
$(document).ready(function () {
  $('.slider').slick({
    // настройки слайдера
    infinite: true,
    slidesToShow: 1,
    slidesToScroll: 1,
    arrows: false,
    autoplay: true,
    autoplaySpeed: 2000,
    speed: 2000
  });
});
var mainPage = document.querySelector('.main-page');
var hiddenBlock = document.querySelector('.hidden-block');
var sectionCategory = document.querySelector('.section-category');
var sectionProductPage = document.querySelector('.section-product-page');
var sectionCatalog = document.querySelector('.section-catalog');
var btnsCatalog = document.querySelectorAll('.btn-catalog');
var heroContent = document.querySelector('.hero__content');
var btnPMain = document.querySelector('.main-btn');
var btnLook = document.querySelectorAll('.btn-look');
var titleChanging = document.querySelector('.title-changing');
var productNode = document.querySelectorAll('.product');
var basket = document.querySelector('.basket');
btnsCatalog.forEach(function (el) {
  el.addEventListener('click', function () {
    mainPage.classList.add('main-page--hidden');
    sectionCatalog.classList.add('section-catalog--active');
    sectionCatalog.querySelector('.catalog__inner').style.marginBottom = '150px';
    if (innerWidth < 767) {
      sectionCatalog.querySelector('.catalog__inner').style.marginBottom = '40px';
    }
    hiddenBlock.classList.add('hidden-block--active');
    sectionProductPage.classList.remove('section-product-page--active');
    heroContent.style.display = 'none';
    document.querySelector('.hero').style.marginBottom = '0';
    basket.classList.remove('basket--active');
    scrollTop();
  });
});
btnPMain.addEventListener('click', function () {
  mainPage.classList.remove('main-page--hidden');
  sectionCatalog.classList.remove('section-catalog--active');
  sectionCatalog.querySelector('.catalog__inner').style.marginBottom = '0px';
  hiddenBlock.classList.remove('hidden-block--active');
  sectionCategory.classList.remove('section-category--active');
  sectionProductPage.classList.remove('section-product-page--active');
  heroContent.style.display = 'flex';
  document.querySelector('.hero').style.marginBottom = '150px';
  basket.classList.remove('basket--active');
});
btnLook.forEach(function (el) {
  el.addEventListener('click', function (event) {
    var parentNodeProduct = el.closest('.product');
    var parentNodeCard = el.closest('.card');
    if (parentNodeProduct) {
      sectionCategory.classList.add('section-category--active');
      sectionCatalog.classList.remove('section-catalog--active');
      var childTitleProduct = parentNodeProduct.querySelector('.title-inner');
      titleChanging.textContent = childTitleProduct.textContent;
    }
    if (parentNodeCard) {
      var childTitleCard = parentNodeCard.querySelector('.title-inner');
      titleChanging.textContent = childTitleCard.textContent;
      mainPage.classList.add('main-page--hidden');
      sectionCategory.classList.add('section-category--active');
      hiddenBlock.classList.add('hidden-block--active');
      sectionCatalog.querySelector('.catalog__inner').style.marginBottom = '150px';
      heroContent.style.display = 'none';
      document.querySelector('.hero').style.marginBottom = '0px';
      basket.classList.remove('basket--active');
    }
    event.stopPropagation();
    scrollTop();
  });
});
productNode.forEach(function (el) {
  el.addEventListener('click', function () {
    sectionProductPage.classList.add('section-product-page--active');
    heroContent.style.display = 'none';
    sectionCatalog.classList.remove('section-catalog--active');
    document.querySelector('.hero').style.marginBottom = '0px';
    mainPage.classList.add('main-page--hidden');
    sectionCategory.classList.remove('section-category--active');
    basket.classList.remove('basket--active');
    scrollTop();
  });
});
var scrollTop = function scrollTop() {
  return document.querySelector('#header').scrollIntoView({
    behavior: 'smooth' // Прокрутить плавно
  });
};

var basketProducts = document.querySelector('.basket__products');
var basketProduct = document.querySelector('.basket__product');
var basketPrice = document.querySelector('.basket__price');
function saveBasketState() {
  var basketState = [];
  document.querySelectorAll('.basket__product').forEach(function (item) {
    basketState.push({
      id: item.getAttribute('data-id'),
      price: parseInt(item.getAttribute('data-price')),
      name: item.querySelector('.basket__product-title').textContent,
      image: item.querySelector('.basket__product-img').src,
      quantity: parseInt(item.querySelector('.basket__product-count-quantity').textContent)
    });
  });
  localStorage.setItem('basketState', JSON.stringify(basketState));
}
function restoreBasketState() {
  var savedBasketState = localStorage.getItem('basketState');
  if (savedBasketState) {
    var basketState = JSON.parse(savedBasketState);
    basketState.forEach(function (product) {
      addToCard(product.name, product.price, product.id, product.image);
      var basketProduct = document.querySelector(".basket__product[data-id='".concat(product.id, "']"));
      if (basketProduct) {
        var quantityElem = basketProduct.querySelector('.basket__product-count-quantity');
        quantityElem.textContent = product.quantity;
      }
    });
    updateTotalSum();
    updateItemCount();
  }
}
document.addEventListener("DOMContentLoaded", function () {
  restoreBasketState();
  document.querySelectorAll('.btn-add-basket').forEach(function (button) {
    button.addEventListener('click', function (event) {
      event.stopPropagation();
      saveBasketState();
      // Находим информацию о продукте
      var productDiv = button.closest('.product');
      var productImage = productDiv.querySelector('.product__img').src;
      var productName = productDiv.querySelector('.product__title').textContent;
      var productPrice = parseInt(productDiv.getAttribute('data-price'));
      var productId = productDiv.getAttribute('data-id');
      addToCard(productName, productPrice, productId, productImage);
      updateTotalSum();
    });
  });
});
var updateItemCount = function updateItemCount() {
  var itemCountElem = document.querySelector('.basket-count');
  itemCountElem.textContent = basketProducts.children.length;
};
var formatPrice = function formatPrice(price) {
  return price.toLocaleString('ru-RU') + ' ₽';
};
function addToCard(productName, productPrice, productId, productImage) {
  var basketProduct = document.createElement('div');
  basketProduct.classList = 'basket__product';
  basketProduct.setAttribute('data-price', productPrice);
  basketProduct.setAttribute('data-id', productId);
  var existingItem = document.querySelector(".basket__product[data-id='".concat(productId, "']"));
  if (existingItem) {
    return;
  }
  basketProduct.innerHTML = "\n   <img class=\"basket__product-img\" src=\"".concat(productImage, "\" alt=\"").concat(productName, " Image\">\n   <div class='basket__product-content'>\n    <p class=\"basket__product-title\">").concat(productName, "</p>\n    <p class=\"basket__product-price\">").concat(productPrice, " \u20BD</p>\n   </div>\n   <div class=\"basket__product-quantity\">\n    <button class=\"basket__product-decrease-btn\">-</button>\n    <p class=\"basket__product-count-quantity\">1</p>\n    <button class=\"basket__product-increase-btn\">+</button>\n </div>\n <button class=\"basket__product-remove\">X</button>\n\n");

  // Добавляем новый элемент в корзину
  basketProducts.appendChild(basketProduct);
  updateItemCount();
  saveBasketState();
  basketProduct.querySelector('.basket__product-increase-btn').addEventListener('click', function (event) {
    incrementQuantity(basketProduct);
  });
  basketProduct.querySelector('.basket__product-decrease-btn').addEventListener('click', function (event) {
    decrementQuantity(basketProduct);
  });
  basketProduct.querySelector('.basket__product-remove').addEventListener('click', function () {
    basketProduct.remove();
    updateTotalSum();
    updateItemCount();
    saveBasketState();
  });
  var btnClear = document.querySelector('.btn-clear');
  btnClear.addEventListener('click', function () {
    clearBasket();
  });
}
function clearBasket() {
  basketProducts.innerHTML = '';
  updateTotalSum();
  updateItemCount();
  localStorage.removeItem('basketState');
}
function incrementQuantity(item) {
  var quantity = item.querySelector('.basket__product-count-quantity');
  quantity.textContent = parseInt(quantity.textContent) + 1;
  updateTotalSum();
  saveBasketState();
}
function decrementQuantity(item) {
  var quantity = item.querySelector('.basket__product-count-quantity');
  quantity.textContent = parseInt(quantity.textContent) - 1;
  if (parseInt(quantity.textContent) === 0) {
    item.remove();
    updateItemCount();
    saveBasketState();
  }
  updateTotalSum();
}
function updateTotalSum() {
  var total = 0;
  document.querySelectorAll('.basket__product').forEach(function (item) {
    total += item.getAttribute('data-price') * item.querySelector('.basket__product-count-quantity').textContent;
  });
  document.querySelector('.main-price').textContent = formatPrice(total);
}
var basketBtn = document.querySelector('.basket-btn');
basketBtn.addEventListener("click", function (event) {
  basket.classList.add('basket--active');
  heroContent.style.display = 'none';
  sectionCatalog.classList.remove('section-catalog--active');
  document.querySelector('.hero').style.marginBottom = '0px';
  mainPage.classList.add('main-page--hidden');
  sectionCategory.classList.remove('section-category--active');
  hiddenBlock.classList.add('hidden-block--active');
  var hiddenBlockChild = hiddenBlock.querySelector('.hidden-block__title-btn-w');
  hiddenBlockChild.style.display = 'none';
  sectionProductPage.classList.remove('section-product-page--active');
});
var burger = document.querySelector('.header__burger');
var btnClose = document.querySelector('.mob-menu__btn-close');
var mobMenu = document.querySelector('.mob-menu');
burger.addEventListener('click', function () {
  mobMenu.classList.add('mob-menu--active');
});
btnClose.addEventListener('click', function () {
  mobMenu.classList.remove('mob-menu--active');
});
/******/ })()
;